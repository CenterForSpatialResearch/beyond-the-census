#Queens Language Map

Mapping diversity of languages in Queens, NY based on data from the Endangered Language Alliance, the US Census, and Glottolog.



###Usage
1. Architecture
    This is a Node JS [Heroku](heroku.com) App, using an [Express](https://expressjs.com/) backbone and running a MongoDB instance on MLab, with a map generated by Leaflet tiles. Reference tutorials [1](http://denelius.com/leaflet-node-mongodb/) [2](http://denelius.com/a-leaflet-map-with-node-js-mongodb-and-heroku/)

    Express is a Node framework that provides the logic for all routing to be done by the app. All GETs, POSTs,...etc are handled by Express. 

    The app requests, loads, and displays the map layer, then does the same with the database to generate the colored squares that appear as an overlay.

    The admin page for content management makes requests directly to the MongoDB instance via Express.
    
2. Making Changes to App
    For local development: make sure to install npm, node, heroku, and git.
    You can `git clone` this repo to your local machine. 
    Run `heroku login` with the correct credientials to have push access to the herokuapp.
    `git remote add heroku https://git.heroku.com/beyond-the-census.git` connects the remote herokuapp to your local repository.

    `npm start` runs a server on port 3000 for local development. When you are ready...`git push heroku master` to build the app and see your new changes running on `beyond-the-census.herokuapp.com`. 

    

3. Updating Database
    _Adding New Entries_

    Run `node insertLanguagesFromCSV.js [path_to_file]` to upload new languages to the databse. The target CSV should be correctly prepared, and should match the format of the languages collection. This script does not have error checking.
    Then, run `node linkDocumentsFromCSV.js [path_to_file]` with the same CSV file to add the correct object IDs into the new entries in the databse.

    OR

    Add new entries or update old ones via the [admin page](beyond-the-census.herokuapp.com)

    OR

    Login to Heroku. Navigate to the beyond-the-census app. Navigate to Overview, click on mLabMongoDB under add-ons.
    You can now make manual modifications to the database. Add, remove, edit.
